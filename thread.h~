#include "types.h"
#include "user.h"


int thread_create(void*(*start_routine)(void *), void *arg){
	
	//Allocate stack using process heap
	int stack = malloc(1024);

	//create new thread
	int pid = fork_thread((int)stack, (int)start_routine, (int)arg);
		//if we are in the child, call to routine
		//printf(2, "HERE\n");
		//start_routine(arg);			
		if(pid < 0)
		{
			printf(2, "Could not create fork %d\n", pid);
		}
			
	return pid;
}

void thread_wait(){
	
	int pid;
	while(pid = wait_thread() != -1);
	return;
}
